*,
*::before,
*::after {
  box-sizing: border-box;
}

* {
  margin: 0;
  padding: 0;
  font: inherit;
}

img {
  display: block;
  max-width: 100%;
}

button {
  cursor: pointer;
}

:root {
 
  --clr-Scissors-Gradient-light: hsl(40, 84%, 53%);
  --clr-Scissors-Gradient-dark: hsl(39, 89%, 49%);
  --clr-Scissors-shadow: rgb(194, 109, 28);
  --clr-Paper-Gradient-light: hsl(230, 89%, 65%);
  --clr-Paper-Gradient-dark: hsl(230, 89%, 62%);
  --clr-Paper-shadow: rgb(40, 69, 197);
  --clr-Rock-Gradient-light: hsl(349, 70%, 56%);
  --clr-Rock-Gradient-dark: hsl(349, 71%, 52%);
  --clr-Rock-shadow: rgb(156, 21, 52);
  --clr-Lizard-Gradient-light: hsl(261, 72%, 63%);
  --clr-Lizard-Gradient-dark: hsl(261, 73%, 60%);
  --clr-Lizard-shadow: rgb(98, 53, 173);
  --clr-Spock-Gradient-light: hsl(189, 58%, 57%);
  --clr-Spock-Gradient-dark: hsl(189, 59%, 53%);
  --clr-Spock-shadow: rgb(43, 142, 171);
  /* Neurtral */
  --clr-Dark-Text: hsl(229, 25%, 31%);
  --clr-Score-Text: hsl(229, 64%, 46%);
  --clr-Header-Outline: hsl(217, 16%, 45%);
  /* Background */
  --clr-Radial-Gradient-light: hsl(214, 47%, 23%);
  --clr-Radial-Gradient-dark: hsl(237, 49%, 15%);

  color-scheme: dark;
}

body {
  padding: 30px 30px 56px;
  min-height: 100vh;
  font-family: "Barlow Semi Condensed";
  font-weight: 600;
  background: radial-gradient(
    circle at 50% 0%,
    var(--clr-Radial-Gradient-light),
    var(--clr-Radial-Gradient-dark)
  );
}

#game {
  &[data-mode="original"] {
    & .board {
      --_button-width: min(130px, 35vw);
      aspect-ratio: 313 / 278;
      background: no-repeat calc(var(--_button-width) / 2)
        calc(var(--_button-width) / 2) / var(--_background-width)
        url("./images/bg-triangle.svg");
      & .gesture-button {
        &[data-gesture="paper"] {
          inset: 0 auto auto 0;
        }
        &[data-gesture="scissors"] {
          inset: 0 0 auto auto;
        }
        &[data-gesture="rock"] {
          inset: auto auto 0 calc(50% - var(--_button-width) / 2);
        }
        &[data-gesture="spock"] {
          display: none;
        }
        &[data-gesture="lizard"] {
          display: none;
        }
      }
    }
    & .rules__img-wrapper {
      aspect-ratio: 304 / 270;
      width: 304px;
      background-image: url("./images/image-rules.svg");
    }
  }
  &[data-mode="bonus"] {
    & .board {
      --_button-width: min(130px, 25vw);
      aspect-ratio: 329 / 313;
      background: no-repeat calc(var(--_button-width) / 2)
        calc(var(--_button-width) / 2) / var(--_background-width)
        url("./images/bg-pentagon.svg");
      & .gesture-button {
        &[data-gesture="paper"] {
          inset: calc(var(--_background-width) * 0.36) 0 auto auto;
        }
        &[data-gesture="scissors"] {
          inset: 0 auto auto calc(50% - var(--_button-width) / 2);
        }
        &[data-gesture="rock"] {
          inset: auto calc(var(--_background-width) * (0.3 / 1.6)) 0 auto;
        }
        &[data-gesture="spock"] {
          inset: calc(var(--_background-width) * 0.36) auto auto 0;
        }
        &[data-gesture="lizard"] {
          inset: auto auto 0 calc(var(--_background-width) * (0.3 / 1.6));
        }
      }
    }
    & .rules__img-wrapper {
      aspect-ratio: 340 / 330;
      width: 340px;
      background-image: url("./images/image-rules-bonus.svg");
    }
  }
}

.banner {
  padding: 16px 20px;
  max-width: 700px;
  margin-inline: auto;
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: min(50px, 5vw);
  border: 2px solid var(--clr-Header-Outline);
  border-radius: 12px;
}

.banner img {
  @media (max-width: 450px) {
    & {
      margin-inline: auto;
    }
  }
}

.banner__score {
  padding: 16px;
  width: 150px;
  display: grid;
  justify-items: center;
  align-content: center;
  color: var(--clr-Score-Text);
  background-color: white;
  border-radius: 6px;
  @media (max-width: 450px) {
    & {
      margin-inline: auto;
    }
  }
}

#score {
  color: var(--clr-Dark-Text);
  font-size: 2.5em;
  line-height: 1;
}

.gesture-button {
  --_border-width: calc(var(--_button-width) * 0.12);
  --_border-color-shadow: #ddd;
  --_button-color-gradient-light: var(--_gesture-color-gradient-light, #aaa);
  --_button-color-gradient-dark: var(--_gesture-color-gradient-dark, #ccc);
  --_button-color-shadow: var(--_gesture-color-shadow, #666);
  --_shadow-shift: calc(var(--_border-width) * 0.2);
  width: var(--_button-width);
  aspect-ratio: 1;
  display: grid;
  place-content: center;
  border: var(--_border-width) solid transparent;
  background: radial-gradient(
        circle at 50% calc(50% + var(--_shadow-shift)),
        white calc(var(--_button-width) / 2 - var(--_border-width)),
        var(--_border-color-shadow)
          calc(var(--_button-width) / 2 - var(--_border-width))
      )
      padding-box,
    linear-gradient(
        var(--_button-color-gradient-light),
        var(--_button-color-gradient-dark)
      )
      border-box;
  border-bottom-width: calc((var(--_border-width) * 0.8));
  border-radius: 50%;
  position: relative;
  & img {
    max-width: calc(var(--_button-width) * 0.5);
    margin-inline: auto;
  }
  &[data-gesture="paper"] {
    --_gesture-color-gradient-light: var(--clr-Paper-Gradient-light);
    --_gesture-color-gradient-dark: var(--clr-Paper-Gradient-dark);
    --_gesture-color-shadow: var(--clr-Paper-shadow);
  }
  &[data-gesture="scissors"] {
    --_gesture-color-gradient-light: var(--clr-Scissors-Gradient-light);
    --_gesture-color-gradient-dark: var(--clr-Scissors-Gradient-dark);
    --_gesture-color-shadow: var(--clr-Scissors-shadow);
  }
  &[data-gesture="rock"] {
    --_gesture-color-gradient-light: var(--clr-Rock-Gradient-light);
    --_gesture-color-gradient-dark: var(--clr-Rock-Gradient-dark);
    --_gesture-color-shadow: var(--clr-Rock-shadow);
  }
  &[data-gesture="lizard"] {
    --_gesture-color-gradient-light: var(--clr-Lizard-Gradient-light);
    --_gesture-color-gradient-dark: var(--clr-Lizard-Gradient-dark);
    --_gesture-color-shadow: var(--clr-Lizard-shadow);
  }
  &[data-gesture="spock"] {
    --_gesture-color-gradient-light: var(--clr-Spock-Gradient-light);
    --_gesture-color-gradient-dark: var(--clr-Spock-Gradient-dark);
    --_gesture-color-shadow: var(--clr-Spock-shadow);
  }
  &::after {
    content: "";
    position: absolute;
    inset: calc(var(--_border-width) * -1);
    bottom: calc(var(--_border-width) * -1 - var(--_shadow-shift));
    background-color: var(--_button-color-shadow);
    border-radius: 50%;
    z-index: -1;
  }
}

.board {
  --_background-width: calc(100% - calc(var(--_button-width)));
  margin-block: 56px 76px;
  margin-inline: auto;
  max-width: 30rem;
  position: relative;
  display: block;
  isolation: isolate;
  & .gesture-button {
    position: absolute;
  }
}

.result {
  --_button-width: min(130px, 30vw);
  max-width: 450px;
  margin-inline: auto;
  margin-block-start: 72px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  grid-template-areas:
    "player house"
    "report report";
  justify-items: stretch;
  column-gap: 16px;
  row-gap: 80px;
  text-align: center;
  @media (min-width: 800px) {
    & {
      --_button-width: min(296px, 20vw);
      max-width: 940px;
      grid-template-columns: 1fr auto 1fr;
      grid-template-areas: "player report house";
      column-gap: 36px;
      align-items: center;
    }
  }
}
.result__show {
  display: grid;
  justify-items: center;
  row-gap: 28px;
  & button {
    order: -1;
    cursor: default;
    &[data-win="true"] {
      animation: spread 1s ease-out 0.35s forwards;
    }
  }
  &.player {
    grid-area: player;
  }
  &.house {
    grid-area: house;
    & .gesture-button {
      animation: fadeIn 0.5s ease;
      &[data-win="true"] {
        animation: fadeIn 0.5s ease, spread 1s ease-out 0.35s forwards;
      }
    }
  }
}
@keyframes fadeIn {
  0% {
    scale: 0.5;
    opacity: 0.25;
  }
  100% {
    scale: 1;
    opacity: 1;
  }
}
@keyframes fadeInX {
  0% {
    transform: scaleX(0);
    opacity: 0.25;
  }
  100% {
    transform: scaleX(1);
    opacity: 1;
  }
}
@keyframes spread {
  to {
    box-shadow: 0 0 0 calc(16px * 1) #ffffff06, 0 0 0 calc(16px * 3) #ffffff06,
      0 0 0 calc(16px * 6) #ffffff06;
  }
}
.result__report {
  grid-area: report;
  width: 70%;
  justify-self: center;
  animation: fadeInX 1s ease 0.35s both;
  @media (min-width: 800px) {
    width: auto;
  }
  & h2 {
    font-size: 3em;
  }
  & button {
    color-scheme: light;
    color: var(--clr-Dark-Text);
    background-color: white;
    margin-block-start: 20px;
    padding: 1em 2em;
    width: 100%;
    border-radius: 6px;
    border: none;
    letter-spacing: clamp(0.125em, 0.75vw, 0.375em);
  }
}

.bottom-buttons {
  margin-block-start: 48px;
  margin-inline: auto;
  width: fit-content;
  display: flex;
  gap: 16px;
  & button {
    padding: 0.875em 2.5em;
    font-size: 0.875em;
    color: inherit;
    letter-spacing: 0.25em;
    display: block;
    background: inherit;
    border-radius: 6px;
    border: 2px solid var(--clr-Header-Outline);
  }
  @media (min-width: 800px) {
    & {
      margin-inline-end: 0;
      flex-direction: column;
    }
  }
}

dialog::backdrop {
  background-color: #0006;
}
dialog[open] {
  margin: auto;
  border-radius: 12px;
  color-scheme: light;
  border: none;
  @media (max-width: 479px) {
    & {
      max-width: unset;
      max-height: unset;
      width: 100vw;
      height: 100vh;
    }
  }
  & .rules__wrapper {
    padding: 36px 32px;
    & h2 {
      font-size: 2em;
    }
    & button {
      border: none;
      background: inherit;
      padding: 0.5em;
      border-radius: 8px;
    }
    & .rules__img-wrapper {
      background-size: cover;
      background-position: center;
    }
    @media (max-width: 479px) {
      & {
        display: grid;
        justify-items: center;
        align-items: center;
        height: 100%;
      }
      & div:first-child {
        display: contents;
      }
      & form {
        order: 1;
      }
      & .rules__img-wrapper {
        width: calc(100vw - 32px * 2) !important;
      }
    }
    @media (min-width: 480px) {
      & div:first-child {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 16px;
      }
      & form {
        margin-inline-start: auto;
      }
      & .rules__img-wrapper {
        margin-block-start: 48px;
        margin-inline: auto;
        max-width: 100%;
      }
    }
  }
}

[hidden] {
  display: none !important;
}

.visually-hidden {
  position: absolute;
  left: -10000px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}